{"version":3,"sources":["webpack:///./src/loading-indicator/index.tsx","webpack:///./src/list/index.tsx","webpack:///./src/middleware/theme.tsx","webpack:///./src/common/util.ts","webpack:///./src/theme/default/list.m.css","webpack:///./src/theme/default/loading-indicator.m.css","webpack:///./src/theme/default/list-item.m.css","webpack:///./src/theme/default/menu-item.m.css","webpack:///./src/list/list.m.css"],"names":["__webpack_require__","r","__webpack_exports__","d","LoadingIndicator","_theme_default_loading_indicator_m_css__WEBPACK_IMPORTED_MODULE_0__","_middleware_theme__WEBPACK_IMPORTED_MODULE_1__","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_2__","Object","theme","properties","factory","middleware","classes","variant","root","role","buffer","bar","primary","inner","MenuItem","ListItem","defaultTransform","List","_dojo_framework_core_middleware_focus__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_middleware_icache__WEBPACK_IMPORTED_MODULE_1__","_dojo_framework_shim_global__WEBPACK_IMPORTED_MODULE_3__","_common_util__WEBPACK_IMPORTED_MODULE_4__","_middleware_theme__WEBPACK_IMPORTED_MODULE_5__","_theme_default_list_item_m_css__WEBPACK_IMPORTED_MODULE_6__","_theme_default_menu_item_m_css__WEBPACK_IMPORTED_MODULE_7__","_theme_default_list_m_css__WEBPACK_IMPORTED_MODULE_8__","_list_m_css__WEBPACK_IMPORTED_MODULE_9__","_dojo_framework_core_middleware_data__WEBPACK_IMPORTED_MODULE_10__","_loading_indicator__WEBPACK_IMPORTED_MODULE_11__","_dojo_framework_core_util__WEBPACK_IMPORTED_MODULE_12__","menuItemFactory","children","onSelect","active","onRequestActive","disabled","widgetId","themedCss","requestActive","id","key","onpointermove","onpointerdown","aria-disabled","listItemFactory","selected","aria-selected","value","label","divider","icache","focus","data","activeIndex","focusable","initialValue","itemsInView","menu","onActiveIndexChange","onBlur","onFocus","onRequestClose","onValue","themeProp","itemRenderer","get","getOrRead","getOptions","setOptions","getTotal","isLoading","setActiveIndex","index","set","setValue","onKeyDown","event","total","stopPropagation","which","Enter","Space","preventDefault","activeItem","Down","metaKey","ctrlKey","computedActiveIndex","Up","Escape","Home","End","newIndex","existingTimer","inputText","getOrSet","clearTimeout","resetTextTimeout","setTimeout","allItems","query","foundIndex","undefined","some","option","optionDisabled","toLowerCase","indexOf","getComputedIndexFromInput","renderPlaceholder","itemProps","idBase","assign","compose","renderItem","itemDisabled","selectedValue","item","offscreenItemProps","onActive","scrollIntoView","offscreenMenuItem","itemHeight","dnode","div","document","createElement","style","position","body","appendChild","mount","domNode","sync","dimensions","getBoundingClientRect","removeChild","height","offscreenHeight","nodePadding","Math","min","menuHeight","rootStyles","maxHeight","shouldFocus","scrollTop","previousActiveIndex","visibleStartIndex","floor","visibleEndIndex","max","startNode","offsetY","renderedItemsCount","pageNumber","pageSize","items","start","count","renderedItems","pages","loading","i","page","pageOptions","indexWithinPage","menuOption","pageIsLoading","renderItems","totalContentHeight","tabIndex","onkeydown","e","onfocus","onblur","onscroll","newScrollTop","target","styles","aria-orientation","aria-activedescendant","transform","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_middleware_theme__WEBPACK_IMPORTED_MODULE_1__","coreTheme","uppercaseFirstChar","charAt","toUpperCase","slice","isThemeWithVariant","hasOwnProperty","baseCss","css","prefix","baseKey","variantKey","virtualCss","keys","reduce"," _key","virtualTheme","variantTheme","baseTheme","prefixedCss","prefixCss","classKey","lowercaseFirstChar","replace","trim","[object Object]","variants","constructedTheme","variantComposesClass","Keys","formatAriaProperties","aria","a","module","exports","wrapper","transformer"],"mappings":"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","file":"18-7.0.0-pre.js","sourcesContent":["import * as css from '../theme/default/loading-indicator.m.css';\nimport theme from '../middleware/theme';\nimport { ThemedProperties } from '@dojo/framework/core/mixins/Themed';\nimport { create, tsx } from '@dojo/framework/core/vdom';\n\nexport interface LoadingIndicatorProperties extends ThemedProperties {}\n\nconst factory = create({ theme }).properties<LoadingIndicatorProperties>();\n\nexport const LoadingIndicator = factory(function LoadingIndicator({ middleware: { theme } }) {\n\tconst classes = theme.classes(css);\n\n\treturn (\n\t\t<div classes={[theme.variant(), classes.root]} role=\"progressbar\">\n\t\t\t<div classes={classes.buffer} />\n\t\t\t<div classes={[classes.bar, classes.primary]}>\n\t\t\t\t<span classes={classes.inner} />\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default LoadingIndicator;\n","import { RenderResult } from '@dojo/framework/core/interfaces';\nimport { focus } from '@dojo/framework/core/middleware/focus';\nimport { createICacheMiddleware } from '@dojo/framework/core/middleware/icache';\nimport { create, renderer, tsx } from '@dojo/framework/core/vdom';\nimport global from '@dojo/framework/shim/global';\nimport { Keys } from '../common/util';\nimport theme from '../middleware/theme';\nimport * as listItemCss from '../theme/default/list-item.m.css';\nimport * as menuItemCss from '../theme/default/menu-item.m.css';\nimport * as css from '../theme/default/list.m.css';\nimport * as fixedCss from './list.m.css';\nimport { createDataMiddleware } from '@dojo/framework/core/middleware/data';\nimport LoadingIndicator from '../loading-indicator';\nimport { throttle } from '@dojo/framework/core/util';\n\nexport interface MenuItemProperties {\n\t/** Callback used when the item is clicked */\n\tonSelect(): void;\n\t/** Property to set the active state of the item, indicates it's the current keyboard / mouse navigation target */\n\tactive?: boolean;\n\t/** Callback used when the item wants to request it be made active, to example on pointer move */\n\tonRequestActive(): void;\n\t/** Property to set the disabled state of the item */\n\tdisabled?: boolean;\n\t/** The id to apply to this widget top level for a11y */\n\twidgetId: string;\n}\n\nconst menuItemFactory = create({ theme }).properties<MenuItemProperties>();\n\nexport const MenuItem = menuItemFactory(function MenuItem({\n\tproperties,\n\tchildren,\n\tmiddleware: { theme }\n}) {\n\tconst { onSelect, active = false, onRequestActive, disabled = false, widgetId } = properties();\n\n\tconst themedCss = theme.classes(menuItemCss);\n\n\tfunction select() {\n\t\t!disabled && onSelect();\n\t}\n\n\tfunction requestActive() {\n\t\t!disabled && !active && onRequestActive();\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tid={widgetId}\n\t\t\tkey=\"root\"\n\t\t\tonpointermove={throttle(() => {\n\t\t\t\trequestActive();\n\t\t\t}, 500)}\n\t\t\tclasses={[\n\t\t\t\ttheme.variant(),\n\t\t\t\tthemedCss.root,\n\t\t\t\tactive && themedCss.active,\n\t\t\t\tdisabled && themedCss.disabled\n\t\t\t]}\n\t\t\tonpointerdown={() => {\n\t\t\t\trequestActive();\n\t\t\t\tselect();\n\t\t\t}}\n\t\t\trole=\"menuitem\"\n\t\t\taria-disabled={disabled}\n\t\t>\n\t\t\t{children()}\n\t\t</div>\n\t);\n});\n\nexport interface ListItemProperties {\n\t/** Callback used when the item is clicked */\n\tonSelect(): void;\n\t/** Property to set the selected state of the item */\n\tselected?: boolean;\n\t/** Property to set the active state of the item, indicates it's the current keyboard / mouse navigation target */\n\tactive?: boolean;\n\t/** Callback used when the item wants to request it be made active, to example on pointer move */\n\tonRequestActive(): void;\n\t/** Property to set the disabled state of the item */\n\tdisabled?: boolean;\n\t/** The id to apply to this widget top level for a11y */\n\twidgetId: string;\n}\n\nconst listItemFactory = create({ theme }).properties<ListItemProperties>();\n\nexport const ListItem = listItemFactory(function ListItem({\n\tproperties,\n\tchildren,\n\tmiddleware: { theme }\n}) {\n\tconst {\n\t\tonSelect,\n\t\tactive = false,\n\t\tonRequestActive,\n\t\tselected = false,\n\t\tdisabled = false,\n\t\twidgetId\n\t} = properties();\n\n\tconst classes = theme.classes(listItemCss);\n\n\tfunction select() {\n\t\t!disabled && onSelect();\n\t}\n\n\tfunction requestActive() {\n\t\t!disabled && !active && onRequestActive();\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tid={widgetId}\n\t\t\tkey=\"root\"\n\t\t\tonpointermove={throttle(() => {\n\t\t\t\trequestActive();\n\t\t\t}, 500)}\n\t\t\tclasses={[\n\t\t\t\ttheme.variant(),\n\t\t\t\tclasses.root,\n\t\t\t\tselected && classes.selected,\n\t\t\t\tactive && classes.active,\n\t\t\t\tdisabled && classes.disabled\n\t\t\t]}\n\t\t\tonpointerdown={() => {\n\t\t\t\trequestActive();\n\t\t\t\tselect();\n\t\t\t}}\n\t\t\trole=\"option\"\n\t\t\taria-disabled={disabled}\n\t\t\taria-selected={selected}\n\t\t>\n\t\t\t{children()}\n\t\t</div>\n\t);\n});\n\nexport type ListOption = { value: string; label?: string; disabled?: boolean; divider?: boolean };\n\nexport const defaultTransform = {\n\tvalue: ['value'],\n\tlabel: ['label'],\n\tdivider: ['divider'],\n\tdisabled: ['disabled']\n};\n\nexport interface ListProperties {\n\t/** The initial selected value */\n\tinitialValue?: string;\n\t/** Controlled value property */\n\tvalue?: string;\n\t/** Callback called when user selects a value */\n\tonValue(value: string): void;\n\t/** Called to request that the menu be closed */\n\tonRequestClose?(): void;\n\t/** Optional callback, when passed, the widget will no longer control it's own active index / keyboard navigation */\n\tonActiveIndexChange?(index: number): void;\n\t/** Optional property to set the activeIndex when it is being controlled externally */\n\tactiveIndex?: number;\n\t/** Determines if the widget can be focused or not. If the active index is controlled from elsewhere you may wish to stop the menu being focused and receiving keyboard events */\n\tfocusable?: boolean;\n\t/** Callback called when menu root is focused */\n\tonFocus?(): void;\n\t/** Callback called when menu root is blurred */\n\tonBlur?(): void;\n\t/** Property to determine how many items to render. Not passing a number will render all results */\n\titemsInView?: number;\n\t/** Property to determine if this list is being used as a menu, changes a11y and item type */\n\tmenu?: boolean;\n\t/** The id to be applied to the root of this widget, if not passed, one will be generated for a11y reasons */\n\twidgetId?: string;\n\t/** Callback to determine if a list item is disabled. If not provided, ListOption.disabled will be used */\n\tdisabled?: (item: ListOption) => boolean;\n}\n\nexport interface ListChildren {\n\t/** Custom renderer for item contents */\n\t(\n\t\titem: ItemRendererProperties,\n\t\tproperties: ListItemProperties & MenuItemProperties\n\t): RenderResult;\n}\n\nexport interface ItemRendererProperties {\n\tactive: boolean;\n\tdisabled: boolean;\n\tlabel?: string;\n\tselected: boolean;\n\tvalue: string;\n}\n\ninterface ListICache {\n\tactiveIndex: number;\n\tinitial: string;\n\tinputText: string;\n\titemHeight: number;\n\titemsInView: number;\n\tmenuHeight: number;\n\tresetInputTextTimer: any;\n\tvalue: string;\n\tscrollTop: number;\n\tpreviousActiveIndex: number;\n}\n\nconst offscreenHeight = (dnode: RenderResult) => {\n\tconst r = renderer(() => dnode);\n\tconst div = global.document.createElement('div');\n\tdiv.style.position = 'absolute';\n\tglobal.document.body.appendChild(div);\n\tr.mount({ domNode: div, sync: true });\n\tconst dimensions = div.getBoundingClientRect();\n\tglobal.document.body.removeChild(div);\n\treturn dimensions.height;\n};\n\nconst factory = create({\n\ticache: createICacheMiddleware<ListICache>(),\n\tfocus,\n\ttheme,\n\tdata: createDataMiddleware<ListOption>()\n})\n\t.properties<ListProperties>()\n\t.children<ListChildren | undefined>();\n\nexport const List = factory(function List({\n\tchildren,\n\tproperties,\n\tid,\n\tmiddleware: { icache, focus, theme, data }\n}) {\n\tconst {\n\t\tactiveIndex,\n\t\tfocusable = true,\n\t\tinitialValue,\n\t\titemsInView = 10,\n\t\tmenu = false,\n\t\tonActiveIndexChange,\n\t\tonBlur,\n\t\tonFocus,\n\t\tonRequestClose,\n\t\tonValue,\n\t\twidgetId,\n\t\ttheme: themeProp\n\t} = properties();\n\tconst [itemRenderer] = children();\n\n\tconst { get, getOrRead, getOptions, setOptions, getTotal, isLoading } = data();\n\n\tfunction setActiveIndex(index: number) {\n\t\tif (onActiveIndexChange) {\n\t\t\tonActiveIndexChange(index);\n\t\t} else {\n\t\t\ticache.set('activeIndex', index);\n\t\t}\n\t}\n\n\tfunction setValue(value: string) {\n\t\ticache.set('value', value);\n\t\tonValue(value);\n\t}\n\n\tfunction onKeyDown(event: KeyboardEvent, total: number) {\n\t\tconst { disabled } = properties();\n\n\t\tevent.stopPropagation();\n\n\t\tswitch (event.which) {\n\t\t\tcase Keys.Enter:\n\t\t\tcase Keys.Space:\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif (activeItem) {\n\t\t\t\t\tconst itemDisabled = disabled ? disabled(activeItem) : activeItem.disabled;\n\n\t\t\t\t\tif (!itemDisabled) {\n\t\t\t\t\t\tsetValue(activeItem.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase Keys.Down:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (event.metaKey || event.ctrlKey) {\n\t\t\t\t\tsetActiveIndex(total - 1);\n\t\t\t\t} else {\n\t\t\t\t\tsetActiveIndex((computedActiveIndex + 1) % total);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase Keys.Up:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (event.metaKey || event.ctrlKey) {\n\t\t\t\t\tsetActiveIndex(0);\n\t\t\t\t} else {\n\t\t\t\t\tsetActiveIndex((computedActiveIndex - 1 + total) % total);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase Keys.Escape:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonRequestClose && onRequestClose();\n\t\t\t\tbreak;\n\t\t\tcase Keys.Home:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsetActiveIndex(0);\n\t\t\t\tbreak;\n\t\t\tcase Keys.End:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsetActiveIndex(total - 1);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (event.metaKey || event.ctrlKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst newIndex = getComputedIndexFromInput(event.key);\n\t\t\t\tif (newIndex !== undefined) {\n\t\t\t\t\tsetActiveIndex(newIndex);\n\t\t\t\t}\n\t\t}\n\t}\n\n\tfunction getComputedIndexFromInput(key: string) {\n\t\tconst existingTimer = icache.get('resetInputTextTimer');\n\t\tlet inputText = icache.getOrSet('inputText', '') + `${key}`;\n\t\texistingTimer && clearTimeout(existingTimer);\n\n\t\tconst resetTextTimeout = setTimeout(() => {\n\t\t\ticache.set('inputText', '');\n\t\t}, 800);\n\n\t\ticache.set('resetInputTextTimer', resetTextTimeout);\n\t\ticache.set('inputText', inputText);\n\n\t\tconst allItems = get({ query: getOptions().query }) as ListOption[];\n\t\tlet foundIndex: number | undefined = undefined;\n\n\t\tconst { disabled } = properties();\n\n\t\tallItems.some((option, index) => {\n\t\t\tconst { disabled: optionDisabled, value, label } = option;\n\t\t\tconst itemDisabled = disabled ? disabled(option) : optionDisabled;\n\n\t\t\tconst match =\n\t\t\t\t!itemDisabled &&\n\t\t\t\t(label || value).toLowerCase().indexOf(inputText.toLowerCase()) === 0;\n\t\t\tif (match) {\n\t\t\t\tfoundIndex = index;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\treturn foundIndex;\n\t}\n\n\tfunction renderItems(start: number, count: number) {\n\t\tconst renderedItems = [];\n\t\tconst pages = [];\n\t\tconst loading = [];\n\t\tgetOrRead(getOptions());\n\t\tconst total = getTotal(getOptions());\n\t\tif (total) {\n\t\t\tfor (let i = 0; i < Math.min(total - start, count); i++) {\n\t\t\t\tconst index = i + startNode;\n\t\t\t\tconst page = Math.floor(index / count) + 1;\n\t\t\t\tif (!pages[page]) {\n\t\t\t\t\tconst pageOptions = {\n\t\t\t\t\t\t...getOptions(),\n\t\t\t\t\t\tpageNumber: page\n\t\t\t\t\t};\n\t\t\t\t\tpages[page] = getOrRead(pageOptions) || [];\n\t\t\t\t\tloading[page] = isLoading(pageOptions);\n\t\t\t\t}\n\t\t\t\tconst indexWithinPage = index - (page - 1) * count;\n\t\t\t\tconst menuOption = pages[page][indexWithinPage];\n\t\t\t\tconst pageIsLoading = loading[page];\n\t\t\t\trenderedItems[i] = pageIsLoading\n\t\t\t\t\t? renderPlaceholder(index)\n\t\t\t\t\t: renderItem(menuOption, index);\n\t\t\t}\n\t\t}\n\n\t\treturn renderedItems;\n\t}\n\n\tfunction renderPlaceholder(index: number) {\n\t\tconst itemProps = {\n\t\t\twidgetId: `${idBase}-item-${index}`,\n\t\t\tkey: `item-${index}`,\n\t\t\tonSelect: () => {},\n\t\t\tactive: false,\n\t\t\tonRequestActive: () => {\n\t\t\t\tsetActiveIndex(index);\n\t\t\t},\n\t\t\tdisabled: true\n\t\t};\n\t\treturn menu ? (\n\t\t\t<MenuItem\n\t\t\t\t{...itemProps}\n\t\t\t\ttheme={theme.compose(\n\t\t\t\t\tmenuItemCss,\n\t\t\t\t\tcss,\n\t\t\t\t\t'item'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<LoadingIndicator />\n\t\t\t</MenuItem>\n\t\t) : (\n\t\t\t<ListItem\n\t\t\t\t{...itemProps}\n\t\t\t\tselected={false}\n\t\t\t\ttheme={theme.compose(\n\t\t\t\t\tlistItemCss,\n\t\t\t\t\tcss,\n\t\t\t\t\t'item'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<LoadingIndicator />\n\t\t\t</ListItem>\n\t\t);\n\t}\n\n\tfunction renderItem(data: ListOption, index: number) {\n\t\tconst { disabled } = properties();\n\t\tconst { value, label, divider, disabled: optionDisabled = false } = data;\n\t\tconst itemDisabled = disabled ? disabled(data) : optionDisabled;\n\t\tconst selected = value === selectedValue;\n\t\tconst active = index === computedActiveIndex;\n\t\tif (active) {\n\t\t\tactiveItem = data;\n\t\t}\n\t\tconst itemProps = {\n\t\t\twidgetId: `${idBase}-item-${index}`,\n\t\t\tkey: `item-${index}`,\n\t\t\tonSelect: () => {\n\t\t\t\tsetValue(value);\n\t\t\t},\n\t\t\tactive,\n\t\t\tonRequestActive: () => {\n\t\t\t\tsetActiveIndex(index);\n\t\t\t},\n\t\t\tdisabled: itemDisabled\n\t\t};\n\n\t\tlet item: RenderResult;\n\n\t\tif (itemRenderer) {\n\t\t\titem = itemRenderer(\n\t\t\t\t{\n\t\t\t\t\tvalue,\n\t\t\t\t\tlabel,\n\t\t\t\t\tdisabled: itemDisabled,\n\t\t\t\t\tactive,\n\t\t\t\t\tselected\n\t\t\t\t},\n\t\t\t\titemProps\n\t\t\t);\n\t\t} else {\n\t\t\tconst children = label || value;\n\t\t\titem = menu ? (\n\t\t\t\t<MenuItem\n\t\t\t\t\t{...itemProps}\n\t\t\t\t\ttheme={theme.compose(\n\t\t\t\t\t\tmenuItemCss,\n\t\t\t\t\t\tcss,\n\t\t\t\t\t\t'item'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</MenuItem>\n\t\t\t) : (\n\t\t\t\t<ListItem\n\t\t\t\t\t{...itemProps}\n\t\t\t\t\tselected={selected}\n\t\t\t\t\ttheme={theme.compose(\n\t\t\t\t\t\tlistItemCss,\n\t\t\t\t\t\tcss,\n\t\t\t\t\t\t'item'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</ListItem>\n\t\t\t);\n\t\t}\n\n\t\treturn divider ? [item, <hr classes={themedCss.divider} />] : item;\n\t}\n\n\tlet { value: selectedValue } = properties();\n\n\tif (selectedValue === undefined) {\n\t\tif (initialValue !== undefined && initialValue !== icache.get('initial')) {\n\t\t\ticache.set('initial', initialValue);\n\t\t\ticache.set('value', initialValue);\n\t\t}\n\n\t\tselectedValue = icache.get('value');\n\t}\n\n\tif (itemsInView !== icache.get('itemsInView')) {\n\t\ticache.set('itemsInView', itemsInView);\n\n\t\tconst offscreenItemProps = {\n\t\t\tselected: false,\n\t\t\tonSelect: () => {},\n\t\t\tactive: false,\n\t\t\tonRequestActive: () => {},\n\t\t\tonActive: () => {},\n\t\t\tscrollIntoView: false,\n\t\t\twidgetId: 'offcreen',\n\t\t\ttheme: themeProp\n\t\t};\n\n\t\tconst offscreenMenuItem = itemRenderer ? (\n\t\t\titemRenderer(\n\t\t\t\t{\n\t\t\t\t\tselected: false,\n\t\t\t\t\tactive: false,\n\t\t\t\t\tvalue: 'offscreen',\n\t\t\t\t\tdisabled: false\n\t\t\t\t},\n\t\t\t\toffscreenItemProps\n\t\t\t)\n\t\t) : menu ? (\n\t\t\t<MenuItem {...offscreenItemProps}>offscreen</MenuItem>\n\t\t) : (\n\t\t\t<ListItem {...offscreenItemProps}>offscreen</ListItem>\n\t\t);\n\n\t\tconst itemHeight = icache.getOrSet('itemHeight', offscreenHeight(offscreenMenuItem));\n\n\t\titemHeight && icache.set('menuHeight', itemsInView * itemHeight);\n\t}\n\n\tconst nodePadding = Math.min(itemsInView, 20);\n\tconst menuHeight = icache.get('menuHeight');\n\tconst idBase = widgetId || `menu-${id}`;\n\tconst rootStyles = menuHeight ? { maxHeight: `${menuHeight}px` } : {};\n\tconst shouldFocus = focus.shouldFocus();\n\tconst themedCss = theme.classes(css);\n\tconst itemHeight = icache.getOrSet('itemHeight', 0);\n\tlet scrollTop = icache.getOrSet('scrollTop', 0);\n\n\tconst previousActiveIndex = icache.get('previousActiveIndex');\n\tconst computedActiveIndex =\n\t\tactiveIndex === undefined ? icache.getOrSet('activeIndex', 0) : activeIndex;\n\n\tlet activeItem: ListOption | undefined = undefined;\n\n\tif (computedActiveIndex !== previousActiveIndex) {\n\t\tconst visibleStartIndex = Math.floor(scrollTop / itemHeight);\n\t\tconst visibleEndIndex = visibleStartIndex + itemsInView - 1;\n\t\tif (computedActiveIndex < visibleStartIndex) {\n\t\t\tscrollTop = computedActiveIndex * itemHeight;\n\t\t} else if (computedActiveIndex > visibleEndIndex) {\n\t\t\tscrollTop = Math.max(computedActiveIndex + 1 - itemsInView, 0) * itemHeight;\n\t\t}\n\n\t\tif (icache.get('scrollTop') !== scrollTop) {\n\t\t\ticache.set('scrollTop', scrollTop);\n\t\t}\n\n\t\ticache.set('previousActiveIndex', computedActiveIndex);\n\t}\n\n\tconst startNode = Math.max(0, Math.floor(scrollTop / itemHeight) - nodePadding);\n\tconst offsetY = startNode * itemHeight;\n\n\tconst renderedItemsCount = itemsInView + 2 * nodePadding;\n\n\tif (!getOptions().pageNumber || !getOptions().pageSize) {\n\t\tconst { pageSize = renderedItemsCount, pageNumber = 1, query } = getOptions();\n\t\tsetOptions({\n\t\t\tpageNumber,\n\t\t\tpageSize,\n\t\t\tquery\n\t\t});\n\t}\n\n\tconst items = renderItems(startNode, renderedItemsCount);\n\tconst total = getTotal(getOptions());\n\n\tif (total === undefined) {\n\t\treturn;\n\t}\n\n\tconst totalContentHeight = total * itemHeight;\n\n\treturn (\n\t\t<div\n\t\t\tkey=\"root\"\n\t\t\tclasses={[theme.variant(), themedCss.root, fixedCss.root]}\n\t\t\ttabIndex={focusable ? 0 : -1}\n\t\t\tonkeydown={(e) => {\n\t\t\t\tonKeyDown(e, total);\n\t\t\t}}\n\t\t\tfocus={() => shouldFocus}\n\t\t\tonfocus={onFocus}\n\t\t\tonpointerdown={focusable ? undefined : (event) => event.preventDefault()}\n\t\t\tonblur={onBlur}\n\t\t\tscrollTop={scrollTop}\n\t\t\tonscroll={(e) => {\n\t\t\t\tconst newScrollTop = (e.target as HTMLElement).scrollTop;\n\t\t\t\tif (scrollTop !== newScrollTop) {\n\t\t\t\t\ticache.set('scrollTop', newScrollTop);\n\t\t\t\t}\n\t\t\t}}\n\t\t\tstyles={rootStyles}\n\t\t\trole={menu ? 'menu' : 'listbox'}\n\t\t\taria-orientation=\"vertical\"\n\t\t\taria-activedescendant={`${idBase}-item-${computedActiveIndex}`}\n\t\t\tid={idBase}\n\t\t>\n\t\t\t<div\n\t\t\t\tclasses={fixedCss.wrapper}\n\t\t\t\tstyles={{\n\t\t\t\t\theight: `${totalContentHeight}px`\n\t\t\t\t}}\n\t\t\t\tkey=\"wrapper\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclasses={fixedCss.transformer}\n\t\t\t\t\tstyles={{\n\t\t\t\t\t\ttransform: `translateY(${offsetY}px)`\n\t\t\t\t\t}}\n\t\t\t\t\tkey=\"transformer\"\n\t\t\t\t>\n\t\t\t\t\t{items}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n});\n\nexport default List;\n","import { create } from '@dojo/framework/core/vdom';\nimport coreTheme, {\n\tThemeProperties as CoreThemeProperties\n} from '@dojo/framework/core/middleware/theme';\nimport { ClassNames, Theme } from '@dojo/framework/core/mixins/Themed';\nimport { ThemeWithVariant } from '@dojo/framework/core/interfaces';\n\nconst factory = create({ coreTheme });\nexport const THEME_KEY = ' _key';\n\nfunction uppercaseFirstChar(value: string) {\n\treturn `${value.charAt(0).toUpperCase()}${value.slice(1)}`;\n}\n\nfunction lowercaseFirstChar(value: string) {\n\treturn `${value.charAt(0).toLowerCase()}${value.slice(1)}`;\n}\n\nfunction isThemeWithVariant(theme: any): theme is ThemeWithVariant {\n\treturn theme && theme.hasOwnProperty('variant');\n}\n\nexport interface ThemeProperties extends CoreThemeProperties {}\n\nexport const theme = factory(function({ middleware: { coreTheme }, properties }) {\n\treturn {\n\t\tcompose: <T extends ClassNames, B extends ClassNames>(\n\t\t\tbaseCss: B,\n\t\t\tcss: T,\n\t\t\tprefix?: string\n\t\t): Theme | ThemeWithVariant => {\n\t\t\tconst theme = properties().theme;\n\t\t\tconst baseKey = baseCss[THEME_KEY];\n\t\t\tconst variantKey = css[THEME_KEY];\n\t\t\tconst virtualCss = Object.keys(baseCss).reduce(\n\t\t\t\t(virtualCss, key) => {\n\t\t\t\t\tif (key === THEME_KEY) {\n\t\t\t\t\t\treturn virtualCss;\n\t\t\t\t\t}\n\t\t\t\t\tif (prefix && !virtualCss[`${prefix}${uppercaseFirstChar(key)}`]) {\n\t\t\t\t\t\tvirtualCss[`${prefix}${uppercaseFirstChar(key)}`] = ' ';\n\t\t\t\t\t}\n\t\t\t\t\tif (!css[key]) {\n\t\t\t\t\t\tvirtualCss[key] = ' ';\n\t\t\t\t\t}\n\t\t\t\t\treturn virtualCss;\n\t\t\t\t},\n\t\t\t\t{ [THEME_KEY]: variantKey } as ClassNames\n\t\t\t);\n\t\t\tconst virtualTheme = coreTheme.classes(virtualCss);\n\t\t\tconst variantTheme = coreTheme.classes(css);\n\t\t\tlet baseTheme = coreTheme.classes(baseCss);\n\t\t\tif (prefix) {\n\t\t\t\tconst prefixedCss = Object.keys({ ...virtualTheme, ...variantTheme }).reduce(\n\t\t\t\t\t(prefixCss, key) => {\n\t\t\t\t\t\tif (key.indexOf(prefix) === 0 && key !== prefix) {\n\t\t\t\t\t\t\tconst classKey = lowercaseFirstChar(key.replace(prefix, ''));\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!variantTheme[key] &&\n\t\t\t\t\t\t\t\tvirtualTheme[key] &&\n\t\t\t\t\t\t\t\tvirtualTheme[key].trim()\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tprefixCss[classKey] = `${baseTheme[classKey]} ${virtualTheme[\n\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t].trim()}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (variantTheme[key]) {\n\t\t\t\t\t\t\t\tprefixCss[classKey] = variantTheme[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prefixCss;\n\t\t\t\t\t},\n\t\t\t\t\t{} as ClassNames\n\t\t\t\t);\n\t\t\t\tbaseTheme = { ...baseTheme, ...prefixedCss };\n\n\t\t\t\tif (isThemeWithVariant(theme)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\t\t...theme.theme.theme,\n\t\t\t\t\t\t\t\t[baseKey]: baseTheme\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tvariants: theme.theme.variants\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvariant: theme.variant\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...theme,\n\t\t\t\t\t[baseKey]: baseTheme\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst constructedTheme = Object.keys(baseTheme).reduce(\n\t\t\t\t(theme, key) => {\n\t\t\t\t\tif (key === THEME_KEY) {\n\t\t\t\t\t\treturn theme;\n\t\t\t\t\t}\n\t\t\t\t\tconst variantComposesClass = variantTheme[key] && variantTheme[key].trim();\n\t\t\t\t\tif (variantTheme[key]) {\n\t\t\t\t\t\ttheme[key] = variantComposesClass;\n\t\t\t\t\t} else if (virtualTheme[key] && virtualTheme[key].trim()) {\n\t\t\t\t\t\ttheme[key] = `${theme[key]} ${virtualTheme[key].trim()}`;\n\t\t\t\t\t}\n\t\t\t\t\treturn theme;\n\t\t\t\t},\n\t\t\t\t{ ...baseTheme } as ClassNames\n\t\t\t);\n\n\t\t\tif (isThemeWithVariant(theme)) {\n\t\t\t\treturn {\n\t\t\t\t\ttheme: {\n\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\t...theme.theme.theme,\n\t\t\t\t\t\t\t[baseKey]: constructedTheme\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvariants: theme.theme.variants\n\t\t\t\t\t},\n\t\t\t\t\tvariant: theme.variant\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...theme,\n\t\t\t\t[baseKey]: constructedTheme\n\t\t\t};\n\t\t},\n\t\t...coreTheme\n\t};\n});\n\nexport default theme;\n","interface AriaPropertyObject {\n\t[key: string]: string | null;\n}\n\nexport enum Keys {\n\tDown = 40,\n\tEnd = 35,\n\tEnter = 13,\n\tEscape = 27,\n\tHome = 36,\n\tLeft = 37,\n\tPageDown = 34,\n\tPageUp = 33,\n\tRight = 39,\n\tSpace = 32,\n\tTab = 9,\n\tUp = 38\n}\n\nexport function formatAriaProperties(aria: AriaPropertyObject): AriaPropertyObject {\n\tconst formattedAria = Object.keys(aria).reduce((a: AriaPropertyObject, key: string) => {\n\t\ta[`aria-${key.toLowerCase()}`] = aria[key];\n\t\treturn a;\n\t}, {});\n\treturn formattedAria;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"@dojo/widgets/list\",\"root\":\"list-m__root__SEwTU\",\"items\":\"list-m__items__1mYDz\",\"divider\":\"list-m__divider__3aqPc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"@dojo/widgets/loading-indicator\",\"root\":\"loading-indicator-m__root__3zBTf\",\"buffer\":\"loading-indicator-m__buffer__qJrL-\",\"bar\":\"loading-indicator-m__bar__2o6JH\",\"primary\":\"loading-indicator-m__primary__SBqVC\",\"inner\":\"loading-indicator-m__inner__212NS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"@dojo/widgets/list-item\",\"root\":\"list-item-m__root__o0V59\",\"selected\":\"list-item-m__selected__1uxna\",\"active\":\"list-item-m__active__SBagO\",\"disabled\":\"list-item-m__disabled__18npQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"@dojo/widgets/menu-item\",\"root\":\"menu-item-m__root__1LkPf\",\"active\":\"menu-item-m__active__3K8Hl\",\"disabled\":\"menu-item-m__disabled__20doE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"@dojo/widgets/list\",\"wrapper\":\"list-m__wrapper__tXBYZ\",\"transformer\":\"list-m__transformer__3altK\",\"root\":\"list-m__root__1z7LC\"};"],"sourceRoot":""}